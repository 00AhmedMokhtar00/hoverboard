<link rel="import" href="../../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../../../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../../bower_components/paper-tabs/paper-tabs.html">

<dom-module id="hero-block">
    <template>
        <style include="shared-styles"></style>
        <style>
            :host {
                display: block;
                --paper-toolbar-background: transparent;
                --paper-tabs-selection-bar-color: var(--default-primary-color);
                --tab-text-color: var(--default-primary-color);
                color: var(--primary-text-color);
                min-height: 250px;
            }

            paper-toolbar {
                margin-left: -16px;
                margin-right: -16px;
            }

            paper-tabs a {
                color: var(--tab-text-color);
            }

            paper-tab {
                flex: none;
                padding: 0 10px;
            }

            .container {
                padding-top: 0;
            }

            .logo {
                margin-top: 7px;
                height: 40px;
            }
        </style>
        <div class="relative">
            <div class="container">
                <paper-toolbar>
                    <paper-icon-button class="menu-toggle" icon="icons:menu" on-tap="togglePanel"
                                       hidden="{{!smallScreen}}"></paper-icon-button>
                    <div class="flex">
                        <a data-route="home" href="/" hidden="{{hideLogo}}">
                            <img class="logo" src="{$ baseurl $}/images/logo-white.svg" alt="{$ title $}">
                        </a>
                    </div>
                    <paper-tabs attr-for-selected="data-route" selected="{{route}}" hidden="{{smallScreen}}" noink>
                        {% for nav in navigation %}
                        <paper-tab data-route="{$ nav.route $}" class="text-u-c" link>
                            <a href="{$ nav.permalink $}" class="nav-link horizontal center-center layout">
                                {$ nav.text $}</a>
                        </paper-tab>
                        {% endfor %}
                    </paper-tabs>
                </paper-toolbar>
                <content></content>
            </div>
        </div>
        <iron-media-query query="(max-width: 599px)" query-matches="{{smallScreen}}"></iron-media-query>
    </template>
    <script>
        (function () {
            'use strict';

            class HeroBlock {
                beforeRegister() {
                    let is = this.constructor.name.replace(/\W+/g, '-')
                        .replace(/([a-z\d])([A-Z])/g, '$1-$2').toLowerCase();
                    this.is = is;
                    this.properties = {
                        route: {
                            type: String,
                            notify: true
                        },
                        hideLogo: Boolean,
                        backgroundColor: String,
                        fontColor: String,
                        tabFontColor: String,
                        tabBarColor: String
                    };
                    this.observers = ['_stylesChanged(backgroundColor, fontColor, tabFontColor, tabBarColor)'];
                }

                togglePanel() {
                    document.querySelector('#paperDrawerPanel').togglePanel();
                }

                _stylesChanged(backgroundColor, fontColor, tabFontColor, tabBarColor) {
                    this.style.color = fontColor;
                    this.style.background = backgroundColor;
                    this.customStyle['--tab-text-color'] = tabFontColor;
                    this.customStyle['--paper-tabs-selection-bar-color'] = tabBarColor;
                    this.updateStyles();
                }

            }

            Polymer(HeroBlock);
        })();
    </script>
</dom-module>
